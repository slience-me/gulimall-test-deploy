pipeline {
  agent {
    node {
      label 'maven'
    }

  }

  parameters {
      string(name: 'PROJECT_VERSION', defaultValue: 'v0.0Beta', description: '版本号')
      string(name: 'PROJECT_NAME', defaultValue: '', description: '')
  }

  environment {
          DOCKER_CREDENTIAL_ID = 'dockerhub-id'
          GITEE_CREDENTIAL_ID = 'gitee-id'
          KUBECONFIG_CREDENTIAL_ID = 'demo-kubeconfig'
          REGISTRY = 'docker.io'
          DOCKERHUB_NAMESPACE = 'sliencemehub'
          GITEE_ACCOUNT = 'slience_me'
  }

  stages {
    stage('拉取代码') {
      agent {
        node {
          label 'maven'
        }

      }
      steps {
        git(url: 'https://gitee.com/slienceme/gulimall.git', credentialsId: 'gitee-id', branch: 'master', changelog: true, poll: false)
        sh 'echo 正在构建 $PROJECT_NAME 版本号 $PROJECT_VERSION'
      }
    }

  }
}
